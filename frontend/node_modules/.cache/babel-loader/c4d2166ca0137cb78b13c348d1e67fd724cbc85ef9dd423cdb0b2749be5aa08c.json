{"ast":null,"code":"import React,{useEffect,useState,useMemo}from'react';import classNames from'classnames/bind';import styles from\"./Detail.module.scss\";import axios from'axios';import{ChevronDown,Bell,Users,Edit,AlertTriangle,Trash2,MoreHorizontal,Play,FileText,Link,ArrowLeft,Pin}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const cx=classNames.bind(styles);const buckets=\"ichigomazone\";function Detail(_ref){let{friend}=_ref;const[currentView,setCurrentView]=useState('main');const[filesData,setFilesData]=useState({media:[],files:[],links:[]});const[error,setError]=useState(null);const[isLoading,setIsLoading]=useState(false);const[previewItem,setPreviewItem]=useState(null);const[hoveredVideo,setHoveredVideo]=useState(null);const[failedMedia,setFailedMedia]=useState(new Set());// Theo dõi media lỗi\n// Gọi API để lấy dữ liệu media, files, links\nuseEffect(()=>{const fetchData=async()=>{if(!(friend!==null&&friend!==void 0&&friend.id)){setError('Không tìm thấy ID người dùng');return;}setIsLoading(true);try{const res=await axios.post('http://localhost:5000/api/storage/all-file',{object:friend.id});if(res.status===200){console.log(res.data);setFilesData({media:res.data.imagesVideos||[],files:res.data.files||[],links:res.data.textLinks||[]});setError(null);}else{setError('Lỗi khi lấy dữ liệu từ API');}}catch(error){console.error('Lỗi khi gọi API:',error);setError('Không thể kết nối đến server. Vui lòng thử lại sau.');}finally{setIsLoading(false);}};fetchData();},[friend===null||friend===void 0?void 0:friend.id]);console.log(filesData);// Memoize dữ liệu để tránh tính toán lại\nconst mediaItems=useMemo(()=>{return filesData.media.slice(0,8).map((mes,index)=>({id:index+1,type:mes.type,url:mes.url}));},[filesData.media]);const files=useMemo(()=>{return filesData.files.slice(0,3).map(m=>({type:m.type,name:m.content,size:'65.32 KB',date:m.date,icon:FileText,bgColor:'purple',url:m.url}));},[filesData.files]);const links=useMemo(()=>{return filesData.links.slice(0,3).map(m=>{let domain=m.link;try{domain=new URL(m.link).hostname;// lấy domain từ URL\n}catch(e){// nếu m.link không phải URL hợp lệ thì giữ nguyên\n}return{name:m.link,// tên gốc\nurl:domain,// chỉ domain\ndate:m.date};});},[filesData.links]);// Xử lý mở modal preview (cho cả ảnh và video)\nconst handlePreview=item=>{setPreviewItem(item);};// Xử lý đóng modal preview khi click vào nền\nconst handleClosePreview=()=>{setPreviewItem(null);};// Xử lý hover vào video\nconst handleMouseEnter=id=>{setHoveredVideo(id);};// Xử lý rời chuột khỏi video\nconst handleMouseLeave=()=>{setHoveredVideo(null);};// Xử lý lỗi tải media\nconst handleMediaError=id=>{setFailedMedia(prev=>new Set([...prev,id]));};const handleDownload=async(s3Key,filename)=>{try{const url=\"https://\".concat(buckets,\".s3.amazonaws.com/\").concat(s3Key);const response=await fetch(url);const blob=await response.blob();const link=document.createElement('a');link.href=URL.createObjectURL(blob);link.download=filename;document.body.appendChild(link);link.click();document.body.removeChild(link);URL.revokeObjectURL(link.href);}catch(error){console.error('Download failed:',error);alert('Không thể tải file. Vui lòng thử lại.');}};// Render modal preview cho ảnh và video\nconst renderPreviewModal=()=>{if(!previewItem)return null;return/*#__PURE__*/_jsx(\"div\",{className:cx('preview-modal'),onClick:handleClosePreview,children:previewItem.type==='image'?failedMedia.has(previewItem.id)?/*#__PURE__*/_jsx(\"div\",{className:cx('media-placeholder'),children:\"Unavailable\"}):/*#__PURE__*/_jsx(\"img\",{src:\"https://\".concat(buckets,\".s3.amazonaws.com/\").concat(previewItem.url),className:cx('media-img'),onError:()=>handleMediaError(previewItem.id)}):previewItem.type==='video'?failedMedia.has(previewItem.id)?/*#__PURE__*/_jsx(\"div\",{className:cx('media-placeholder'),children:\"Unavailable\"}):/*#__PURE__*/_jsx(\"video\",{src:\"https://\".concat(buckets,\".s3.amazonaws.com/\").concat(previewItem.url),controls:true,playsInline:true,autoPlay:true,onError:()=>handleMediaError(previewItem.id)}):/*#__PURE__*/_jsx(\"div\",{className:cx('media-placeholder'),children:\"Kh\\xF4ng h\\u1ED7 tr\\u1EE3\"})});};// Render giao diện chính\nconst renderMainView=()=>/*#__PURE__*/_jsxs(\"div\",{className:cx('main-content'),children:[/*#__PURE__*/_jsx(\"div\",{className:cx('avatar-section'),children:/*#__PURE__*/_jsx(\"div\",{className:cx('avatar'),children:friend!==null&&friend!==void 0&&friend.avatar&&!failedMedia.has('avatar')?/*#__PURE__*/_jsx(\"img\",{src:\"https://\".concat(buckets,\".s3.amazonaws.com/\").concat(friend.avatar),alt:\"Avatar\",className:cx('avatar-img'),onError:()=>handleMediaError('avatar')}):/*#__PURE__*/_jsx(\"div\",{className:cx('media-placeholder'),children:\"Unavailable\"})})}),/*#__PURE__*/_jsx(\"div\",{className:cx('chat-name'),children:/*#__PURE__*/_jsx(\"h3\",{children:(friend===null||friend===void 0?void 0:friend.name)||'Người dùng không xác định'})}),/*#__PURE__*/_jsx(\"div\",{className:cx('action-section'),children:/*#__PURE__*/_jsxs(\"div\",{className:cx('action-container'),children:[/*#__PURE__*/_jsxs(\"button\",{className:cx('action-btn'),children:[/*#__PURE__*/_jsx(Bell,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:\"T\\u1EAFt th\\xF4ng b\\xE1o\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:cx('action-btn'),children:[/*#__PURE__*/_jsx(Pin,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:\"Ghim tr\\xF2 chuy\\u1EC7n\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:cx('action-btn'),children:[/*#__PURE__*/_jsx(Edit,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0110\\u1EB7t bi\\u1EC7t danh\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:cx('section'),children:[/*#__PURE__*/_jsxs(\"div\",{className:cx('section-header'),children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u1EA2nh/Video\"}),/*#__PURE__*/_jsx(ChevronDown,{size:16})]}),isLoading?/*#__PURE__*/_jsx(\"div\",{className:cx('loading'),children:\"\\u0110ang t\\u1EA3i...\"}):error?/*#__PURE__*/_jsx(\"div\",{className:cx('error'),children:error}):/*#__PURE__*/_jsx(\"div\",{className:cx('media-grid'),children:mediaItems.map(item=>/*#__PURE__*/_jsx(\"div\",{className:cx('media-item'),onMouseEnter:()=>item.type==='video'&&handleMouseEnter(item.id),onMouseLeave:()=>item.type==='video'&&handleMouseLeave(),children:item.type==='image'?failedMedia.has(item.id)?/*#__PURE__*/_jsx(\"div\",{className:cx('media-placeholder'),children:\"Unavailable\"}):/*#__PURE__*/_jsx(\"img\",{src:\"https://\".concat(buckets,\".s3.amazonaws.com/\").concat(item.url),className:cx('media-img'),onError:()=>handleMediaError(item.id),onClick:()=>handlePreview(item)}):item.type==='video'?failedMedia.has(item.id)?/*#__PURE__*/_jsx(\"div\",{className:cx('media-placeholder'),children:\"Unavailable\"}):/*#__PURE__*/_jsxs(\"div\",{className:cx('video-container'),onClick:()=>handlePreview(item),children:[/*#__PURE__*/_jsx(\"video\",{src:\"https://\".concat(buckets,\".s3.amazonaws.com/\").concat(item.url),className:cx('media-video'),playsInline:true,preload:\"metadata\",onError:()=>handleMediaError(item.id)}),/*#__PURE__*/_jsx(\"div\",{className:cx('video-overlay',{'video-overlay--visible':hoveredVideo===item.id}),children:/*#__PURE__*/_jsx(\"div\",{className:cx('video-play-icon'),children:/*#__PURE__*/_jsx(Play,{size:32})})})]}):/*#__PURE__*/_jsx(\"div\",{className:cx('media-placeholder'),children:\"Kh\\xF4ng h\\u1ED7 tr\\u1EE3\"})},item.id))}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('media'),className:cx('view-all-btn'),disabled:isLoading,children:\"Xem t\\u1EA5t c\\u1EA3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:cx('section'),children:[/*#__PURE__*/_jsxs(\"div\",{className:cx('section-header'),children:[/*#__PURE__*/_jsx(\"span\",{children:\"File\"}),/*#__PURE__*/_jsx(ChevronDown,{size:16})]}),isLoading?/*#__PURE__*/_jsx(\"div\",{className:cx('loading'),children:\"\\u0110ang t\\u1EA3i...\"}):error?/*#__PURE__*/_jsx(\"div\",{className:cx('error'),children:error}):/*#__PURE__*/_jsx(\"div\",{className:cx('files-list'),children:files.map((file,index)=>/*#__PURE__*/_jsxs(\"div\",{className:cx('file-item'),children:[/*#__PURE__*/_jsx(\"div\",{className:cx('file-icon',file.bgColor),children:/*#__PURE__*/_jsx(\"a\",{href:\"https://\".concat(buckets,\".s3.amazonaws.com/\").concat(file.url),target:\"_blank\",rel:\"noopener noreferrer\",download:true,children:/*#__PURE__*/_jsx(file.icon,{size:20,color:\"white\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:cx('file-info'),children:[/*#__PURE__*/_jsx(\"a\",{href:\"https://\".concat(buckets,\".s3.amazonaws.com/\").concat(file.url),target:\"_blank\",rel:\"noopener noreferrer\",className:cx('file-name'),download:true,children:file.name}),/*#__PURE__*/_jsx(\"p\",{className:cx('file-size'),children:file.size})]}),/*#__PURE__*/_jsx(\"div\",{className:cx('file-date'),children:file.date})]},index))}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('files'),className:cx('view-all-btn'),disabled:isLoading,children:\"Xem t\\u1EA5t c\\u1EA3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:cx('section'),children:[/*#__PURE__*/_jsxs(\"div\",{className:cx('section-header'),children:[/*#__PURE__*/_jsx(\"span\",{children:\"Link\"}),/*#__PURE__*/_jsx(ChevronDown,{size:16})]}),isLoading?/*#__PURE__*/_jsx(\"div\",{className:cx('loading'),children:\"\\u0110ang t\\u1EA3i...\"}):error?/*#__PURE__*/_jsx(\"div\",{className:cx('error'),children:error}):/*#__PURE__*/_jsx(\"div\",{className:cx('links-list'),children:links.map((link,index)=>/*#__PURE__*/_jsxs(\"div\",{className:cx('link-item'),children:[/*#__PURE__*/_jsx(\"div\",{className:cx('link-icon'),children:/*#__PURE__*/_jsx(\"a\",{href:link.url,target:\"_blank\",rel:\"noopener noreferrer\",children:/*#__PURE__*/_jsx(Link,{size:20})})}),/*#__PURE__*/_jsxs(\"div\",{className:cx('link-info'),children:[/*#__PURE__*/_jsx(\"a\",{href:link.name,target:\"_blank\",rel:\"noopener noreferrer\",className:cx('link-name'),children:link.name}),/*#__PURE__*/_jsxs(\"div\",{className:cx('link-meta'),children:[/*#__PURE__*/_jsx(\"a\",{href:link.name,target:\"_blank\",rel:\"noopener noreferrer\",className:cx('link-url'),children:link.url}),/*#__PURE__*/_jsx(\"span\",{className:cx('link-date'),children:link.date})]})]})]},index))}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('links'),className:cx('view-all-btn'),disabled:isLoading,children:\"Xem t\\u1EA5t c\\u1EA3\"})]}),/*#__PURE__*/_jsx(\"div\",{className:cx('section'),children:/*#__PURE__*/_jsxs(\"button\",{className:cx('warning-btn'),children:[/*#__PURE__*/_jsx(AlertTriangle,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:\"B\\xE1o x\\u1EA5u\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:cx('section'),children:/*#__PURE__*/_jsxs(\"div\",{className:cx('delete-actions'),children:[/*#__PURE__*/_jsxs(\"button\",{className:cx('delete-btn'),children:[/*#__PURE__*/_jsx(Trash2,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:\"X\\xF3a l\\u1ECBch s\\u1EED tr\\xF2 chuy\\u1EC7n\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:cx('member-btn'),children:[/*#__PURE__*/_jsxs(\"div\",{className:cx('member-content'),children:[/*#__PURE__*/_jsx(Users,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:\"Th\\xE0nh vi\\xEAn\"})]}),/*#__PURE__*/_jsx(MoreHorizontal,{size:16})]})]})})]});// Render toàn bộ media\nconst renderMediaView=()=>/*#__PURE__*/_jsx(\"div\",{className:cx('media-view'),children:/*#__PURE__*/_jsx(\"div\",{className:cx('media-grid-full'),children:filesData.media.map((item,index)=>/*#__PURE__*/_jsx(\"div\",{className:cx('media-item-full'),onMouseEnter:()=>item.type==='video'&&handleMouseEnter(index),onMouseLeave:()=>item.type==='video'&&handleMouseLeave(),children:item.type==='image'?failedMedia.has(index)?/*#__PURE__*/_jsx(\"div\",{className:cx('media-placeholder'),children:\"Unavailable\"}):/*#__PURE__*/_jsx(\"img\",{src:\"https://\".concat(buckets,\".s3.amazonaws.com/\").concat(item.url),className:cx('media-img'),onError:()=>handleMediaError(index),onClick:()=>handlePreview({id:index,type:item.type,url:item.url})}):item.type==='video'?failedMedia.has(index)?/*#__PURE__*/_jsx(\"div\",{className:cx('media-placeholder'),children:\"Unavailable\"}):/*#__PURE__*/_jsxs(\"div\",{className:cx('video-container'),onClick:()=>handlePreview({id:index,type:item.type,url:item.url}),children:[/*#__PURE__*/_jsx(\"video\",{src:\"https://\".concat(buckets,\".s3.amazonaws.com/\").concat(item.url),className:cx('media-video'),playsInline:true,preload:\"metadata\",onError:()=>handleMediaError(index)}),/*#__PURE__*/_jsx(\"div\",{className:cx('video-overlay',{'video-overlay--visible':hoveredVideo===index}),children:/*#__PURE__*/_jsx(\"div\",{className:cx('video-play-icon'),children:/*#__PURE__*/_jsx(Play,{size:32})})})]}):/*#__PURE__*/_jsx(\"div\",{className:cx('media-placeholder'),children:\"Kh\\xF4ng h\\u1ED7 tr\\u1EE3\"})},index))})});// Render toàn bộ files\nconst renderFilesView=()=>/*#__PURE__*/_jsx(\"div\",{className:cx('files-view'),children:/*#__PURE__*/_jsx(\"div\",{className:cx('files-list-full'),children:filesData.files.map((file,index)=>/*#__PURE__*/_jsxs(\"div\",{className:cx('file-item-full'),children:[/*#__PURE__*/_jsx(\"div\",{className:cx('file-icon-large','blue'),children:/*#__PURE__*/_jsx(\"a\",{href:\"https://\".concat(buckets,\".s3.amazonaws.com/\").concat(file.url),target:\"_blank\",rel:\"noopener noreferrer\",download:file.content,children:/*#__PURE__*/_jsx(FileText,{size:24,color:\"white\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:cx('file-info'),children:[/*#__PURE__*/_jsx(\"a\",{href:\"https://\".concat(buckets,\".s3.amazonaws.com/\").concat(file.url),target:\"_blank\",rel:\"noopener noreferrer\",className:cx('file-name'),download:file.content,children:file.content}),/*#__PURE__*/_jsx(\"p\",{className:cx('file-size'),children:\"65.32 KB\"})]}),/*#__PURE__*/_jsx(\"div\",{className:cx('file-date'),children:file.date})]},index))})});// Render toàn bộ links\nconst renderLinksView=()=>/*#__PURE__*/_jsx(\"div\",{className:cx('links-view'),children:/*#__PURE__*/_jsx(\"div\",{className:cx('links-list-full'),children:filesData.links.map((link,index)=>{let domain=link.link;try{const fixed=link.link.startsWith('http')?link.link:\"http://\".concat(link.link);domain=new URL(fixed).hostname;}catch(e){// giữ nguyên nếu lỗi\n}return/*#__PURE__*/_jsxs(\"div\",{className:cx('link-item-full'),children:[/*#__PURE__*/_jsx(\"div\",{className:cx('link-icon-large'),children:/*#__PURE__*/_jsx(\"a\",{href:link.link,target:\"_blank\",rel:\"noopener noreferrer\",children:/*#__PURE__*/_jsx(Link,{size:24})})}),/*#__PURE__*/_jsxs(\"div\",{className:cx('link-info'),children:[/*#__PURE__*/_jsx(\"a\",{href:link.link,target:\"_blank\",rel:\"noopener noreferrer\",className:cx('link-name'),children:link.link}),/*#__PURE__*/_jsxs(\"div\",{className:cx('link-meta'),children:[/*#__PURE__*/_jsx(\"a\",{href:link.link,target:\"_blank\",rel:\"noopener noreferrer\",className:cx('link-url'),children:domain}),/*#__PURE__*/_jsx(\"span\",{className:cx('link-date'),children:link.date})]})]})]},index);})})});// Lấy tiêu đề dựa trên view hiện tại\nconst getViewTitle=()=>{switch(currentView){case'media':return'Ảnh/Video';case'files':return'File';case'links':return'Link';default:return'Thông tin hội thoại';}};// Nếu không có friend, hiển thị giao diện thay thế\nif(!friend){return/*#__PURE__*/_jsxs(\"div\",{className:cx('detail'),children:[/*#__PURE__*/_jsx(\"div\",{className:cx('header'),children:/*#__PURE__*/_jsx(\"h2\",{className:cx('title'),children:\"L\\u1ED7i\"})}),/*#__PURE__*/_jsx(\"div\",{className:cx('error'),children:\"Kh\\xF4ng t\\xECm th\\u1EA5y th\\xF4ng tin ng\\u01B0\\u1EDDi d\\xF9ng. Vui l\\xF2ng ch\\u1ECDn m\\u1ED9t ng\\u01B0\\u1EDDi d\\xF9ng \\u0111\\u1EC3 xem chi ti\\u1EBFt.\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:cx('detail'),children:[/*#__PURE__*/_jsxs(\"div\",{className:cx('header'),children:[currentView!=='main'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('main'),className:cx('back-btn'),children:/*#__PURE__*/_jsx(ArrowLeft,{size:16})}),/*#__PURE__*/_jsx(\"h2\",{className:cx('title'),children:getViewTitle()})]}),currentView==='main'&&renderMainView(),currentView==='media'&&renderMediaView(),currentView==='files'&&renderFilesView(),currentView==='links'&&renderLinksView(),renderPreviewModal()]});}export default Detail;","map":{"version":3,"names":["React","useEffect","useState","useMemo","classNames","styles","axios","ChevronDown","Bell","Users","Edit","AlertTriangle","Trash2","MoreHorizontal","Play","FileText","Link","ArrowLeft","Pin","jsx","_jsx","jsxs","_jsxs","cx","bind","buckets","Detail","_ref","friend","currentView","setCurrentView","filesData","setFilesData","media","files","links","error","setError","isLoading","setIsLoading","previewItem","setPreviewItem","hoveredVideo","setHoveredVideo","failedMedia","setFailedMedia","Set","fetchData","id","res","post","object","status","console","log","data","imagesVideos","textLinks","mediaItems","slice","map","mes","index","type","url","m","name","content","size","date","icon","bgColor","domain","link","URL","hostname","e","handlePreview","item","handleClosePreview","handleMouseEnter","handleMouseLeave","handleMediaError","prev","handleDownload","s3Key","filename","concat","response","fetch","blob","document","createElement","href","createObjectURL","download","body","appendChild","click","removeChild","revokeObjectURL","alert","renderPreviewModal","className","onClick","children","has","src","onError","controls","playsInline","autoPlay","renderMainView","avatar","alt","onMouseEnter","onMouseLeave","preload","disabled","file","target","rel","color","renderMediaView","renderFilesView","renderLinksView","fixed","startsWith","getViewTitle"],"sources":["/home/ichigomazone/Vscode/ReactJs/new-ui/frontend/src/components/Detail/index.js"],"sourcesContent":["\nimport React, { useEffect, useState, useMemo } from 'react';\nimport classNames from 'classnames/bind';\nimport styles from './Detail.module.scss';\nimport axios from 'axios';\nimport {\n  ChevronDown,\n  Bell,\n  Users,\n  Edit,\n  AlertTriangle,\n  Trash2,\n  MoreHorizontal,\n  Play,\n  FileText,\n  Link,\n  ArrowLeft,\n  Pin,\n} from 'lucide-react';\n\nconst cx = classNames.bind(styles);\nconst buckets = \"ichigomazone\";\n\nfunction Detail({ friend }) {\n  const [currentView, setCurrentView] = useState('main');\n  const [filesData, setFilesData] = useState({ media: [], files: [], links: [] });\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [previewItem, setPreviewItem] = useState(null);\n  const [hoveredVideo, setHoveredVideo] = useState(null);\n  const [failedMedia, setFailedMedia] = useState(new Set()); // Theo dõi media lỗi\n\n  // Gọi API để lấy dữ liệu media, files, links\n  useEffect(() => {\n    const fetchData = async () => {\n      if (!friend?.id) {\n        setError('Không tìm thấy ID người dùng');\n        return;\n      }\n\n      setIsLoading(true);\n      try {\n        const res = await axios.post('http://localhost:5000/api/storage/all-file', {\n          object: friend.id,\n        });\n\n        if (res.status === 200) {\n          console.log(res.data)\n          setFilesData({\n            media: res.data.imagesVideos || [],\n            files: res.data.files || [],\n            links: res.data.textLinks || [],\n          });\n          setError(null);\n        } else {\n          setError('Lỗi khi lấy dữ liệu từ API');\n        }\n      } catch (error) {\n        console.error('Lỗi khi gọi API:', error);\n        setError('Không thể kết nối đến server. Vui lòng thử lại sau.');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [friend?.id]);\n\n  console.log(filesData);\n\n  // Memoize dữ liệu để tránh tính toán lại\n  const mediaItems = useMemo(() => {\n    return filesData.media.slice(0, 8).map((mes, index) => ({\n      id: index + 1,\n      type: mes.type,\n      url: mes.url,\n    }));\n  }, [filesData.media]);\n\n  const files = useMemo(() => {\n    return filesData.files.slice(0, 3).map((m) => ({\n      type: m.type,\n      name: m.content,\n      size: '65.32 KB',\n      date: m.date,\n      icon: FileText,\n      bgColor: 'purple',\n      url: m.url,\n    }));\n  }, [filesData.files]);\n\n  const links = useMemo(() => {\n    return filesData.links.slice(0, 3).map((m) => {\n      let domain = m.link;\n      try {\n        domain = new URL(m.link).hostname; // lấy domain từ URL\n      } catch (e) {\n        // nếu m.link không phải URL hợp lệ thì giữ nguyên\n      }\n      return {\n        name: m.link,   // tên gốc\n        url: domain,    // chỉ domain\n        date: m.date,\n      };\n    });\n  }, [filesData.links]);\n\n  // Xử lý mở modal preview (cho cả ảnh và video)\n  const handlePreview = (item) => {\n    setPreviewItem(item);\n  };\n\n  // Xử lý đóng modal preview khi click vào nền\n  const handleClosePreview = () => {\n    setPreviewItem(null);\n  };\n\n  // Xử lý hover vào video\n  const handleMouseEnter = (id) => {\n    setHoveredVideo(id);\n  };\n\n  // Xử lý rời chuột khỏi video\n  const handleMouseLeave = () => {\n    setHoveredVideo(null);\n  };\n\n  // Xử lý lỗi tải media\n  const handleMediaError = (id) => {\n    setFailedMedia((prev) => new Set([...prev, id]));\n  };\n\n  const handleDownload = async (s3Key, filename) => {\n    try {\n      const url = `https://${buckets}.s3.amazonaws.com/${s3Key}`;\n      const response = await fetch(url);\n      const blob = await response.blob();\n      const link = document.createElement('a');\n      link.href = URL.createObjectURL(blob);\n      link.download = filename;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      URL.revokeObjectURL(link.href);\n    } catch (error) {\n      console.error('Download failed:', error);\n      alert('Không thể tải file. Vui lòng thử lại.');\n    }\n  };\n\n  // Render modal preview cho ảnh và video\n  const renderPreviewModal = () => {\n    if (!previewItem) return null;\n\n    return (\n      <div className={cx('preview-modal')} onClick={handleClosePreview}>\n        {previewItem.type === 'image' ? (\n          failedMedia.has(previewItem.id) ? (\n            <div className={cx('media-placeholder')}>Unavailable</div>\n          ) : (\n            <img\n              src={`https://${buckets}.s3.amazonaws.com/${previewItem.url}`}\n              className={cx('media-img')}\n              onError={() => handleMediaError(previewItem.id)}\n            />\n          )\n        ) : previewItem.type === 'video' ? (\n          failedMedia.has(previewItem.id) ? (\n            <div className={cx('media-placeholder')}>Unavailable</div>\n          ) : (\n            <video\n              src={`https://${buckets}.s3.amazonaws.com/${previewItem.url}`}\n              controls\n              playsInline\n              autoPlay\n              onError={() => handleMediaError(previewItem.id)}\n            />\n          )\n        ) : (\n          <div className={cx('media-placeholder')}>Không hỗ trợ</div>\n        )}\n      </div>\n    );\n  };\n\n  // Render giao diện chính\n  const renderMainView = () => (\n    <div className={cx('main-content')}>\n      {/* Avatar Section */}\n      <div className={cx('avatar-section')}>\n        <div className={cx('avatar')}>\n          {friend?.avatar && !failedMedia.has('avatar') ? (\n            <img\n              src={`https://${buckets}.s3.amazonaws.com/${friend.avatar}`}\n              alt=\"Avatar\"\n              className={cx('avatar-img')}\n              onError={() => handleMediaError('avatar')}\n            />\n          ) : (\n            <div className={cx('media-placeholder')}>Unavailable</div>\n          )}\n        </div>\n      </div>\n\n      {/* Chat Name */}\n      <div className={cx('chat-name')}>\n        <h3>{friend?.name || 'Người dùng không xác định'}</h3>\n      </div>\n\n      {/* Action Button */}\n      <div className={cx('action-section')}>\n        <div className={cx('action-container')}>\n          <button className={cx('action-btn')}>\n            <Bell size={20} />\n            <span>Tắt thông báo</span>\n          </button>\n          <button className={cx('action-btn')}>\n            <Pin size={20} />\n            <span>Ghim trò chuyện</span>\n          </button>\n          <button className={cx('action-btn')}>\n            <Edit size={20} />\n            <span>Đặt biệt danh</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Images/Videos Section */}\n      <div className={cx('section')}>\n        <div className={cx('section-header')}>\n          <span>Ảnh/Video</span>\n          <ChevronDown size={16} />\n        </div>\n        {isLoading ? (\n          <div className={cx('loading')}>Đang tải...</div>\n        ) : error ? (\n          <div className={cx('error')}>{error}</div>\n        ) : (\n          <div className={cx('media-grid')}>\n            {mediaItems.map((item) => (\n              <div\n                key={item.id}\n                className={cx('media-item')}\n                onMouseEnter={() => item.type === 'video' && handleMouseEnter(item.id)}\n                onMouseLeave={() => item.type === 'video' && handleMouseLeave()}\n              >\n                {item.type === 'image' ? (\n                  failedMedia.has(item.id) ? (\n                    <div className={cx('media-placeholder')}>Unavailable</div>\n                  ) : (\n                    <img\n                      src={`https://${buckets}.s3.amazonaws.com/${item.url}`}\n                      className={cx('media-img')}\n                      onError={() => handleMediaError(item.id)}\n                      onClick={() => handlePreview(item)}\n                    />\n                  )\n                ) : item.type === 'video' ? (\n                  failedMedia.has(item.id) ? (\n                    <div className={cx('media-placeholder')}>Unavailable</div>\n                  ) : (\n                    <div\n                      className={cx('video-container')}\n                      onClick={() => handlePreview(item)}\n                    >\n                      <video\n                        src={`https://${buckets}.s3.amazonaws.com/${item.url}`}\n                        className={cx('media-video')}\n                        playsInline\n                        preload=\"metadata\"\n                        onError={() => handleMediaError(item.id)}\n                      />\n                      <div\n                        className={cx('video-overlay', { 'video-overlay--visible': hoveredVideo === item.id })}\n                      >\n                        <div className={cx('video-play-icon')}>\n                          <Play size={32} />\n                        </div>\n                      </div>\n                    </div>\n                  )\n                ) : (\n                  <div className={cx('media-placeholder')}>Không hỗ trợ</div>\n                )}\n              </div>\n            ))}\n          </div>\n        )}\n        <button\n          onClick={() => setCurrentView('media')}\n          className={cx('view-all-btn')}\n          disabled={isLoading}\n        >\n          Xem tất cả\n        </button>\n      </div>\n\n      {/* Files Section */}\n      <div className={cx('section')}>\n        <div className={cx('section-header')}>\n          <span>File</span>\n          <ChevronDown size={16} />\n        </div>\n        {isLoading ? (\n          <div className={cx('loading')}>Đang tải...</div>\n        ) : error ? (\n          <div className={cx('error')}>{error}</div>\n        ) : (\n          <div className={cx('files-list')}>\n            {files.map((file, index) => (\n              <div key={index} className={cx('file-item')}>\n                <div className={cx('file-icon', file.bgColor)}>\n                  <a\n                    href={`https://${buckets}.s3.amazonaws.com/${file.url}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    download\n                  >\n                    <file.icon size={20} color='white'/>\n                  </a>\n                </div>\n                <div className={cx('file-info')}>\n                  <a\n                    href={`https://${buckets}.s3.amazonaws.com/${file.url}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className={cx('file-name')}\n                    download\n                  >\n                    {file.name}\n                  </a>\n                  <p className={cx('file-size')}>{file.size}</p>\n                </div>\n                <div className={cx('file-date')}>{file.date}</div>\n              </div>\n            ))}\n          </div>\n        )}\n        <button\n          onClick={() => setCurrentView('files')}\n          className={cx('view-all-btn')}\n          disabled={isLoading}\n        >\n          Xem tất cả\n        </button>\n      </div>\n\n      {/* Links Section */}\n      <div className={cx('section')}>\n        <div className={cx('section-header')}>\n          <span>Link</span>\n          <ChevronDown size={16} />\n        </div>\n        {isLoading ? (\n          <div className={cx('loading')}>Đang tải...</div>\n        ) : error ? (\n          <div className={cx('error')}>{error}</div>\n        ) : (\n          <div className={cx('links-list')}>\n            {links.map((link, index) => (\n              <div key={index} className={cx('link-item')}>\n                <div className={cx('link-icon')}>\n                  <a href={link.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                    <Link size={20} />\n                  </a>\n                </div>\n                <div className={cx('link-info')}>\n                  <a\n                    href={link.name}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className={cx('link-name')}\n                  >\n                    {link.name}\n                  </a>\n                  <div className={cx('link-meta')}>\n                    <a\n                      href={link.name}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className={cx('link-url')}\n                    >\n                      {link.url}\n                    </a>\n                    <span className={cx('link-date')}>{link.date}</span>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n        <button\n          onClick={() => setCurrentView('links')}\n          className={cx('view-all-btn')}\n          disabled={isLoading}\n        >\n          Xem tất cả\n        </button>\n      </div>\n\n      {/* Warning Section */}\n      <div className={cx('section')}>\n        <button className={cx('warning-btn')}>\n          <AlertTriangle size={20} />\n          <span>Báo xấu</span>\n        </button>\n      </div>\n\n      {/* Delete Chat Section */}\n      <div className={cx('section')}>\n        <div className={cx('delete-actions')}>\n          <button className={cx('delete-btn')}>\n            <Trash2 size={20} />\n            <span>Xóa lịch sử trò chuyện</span>\n          </button>\n          <button className={cx('member-btn')}>\n            <div className={cx('member-content')}>\n              <Users size={20} />\n              <span>Thành viên</span>\n            </div>\n            <MoreHorizontal size={16} />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n\n  // Render toàn bộ media\n  const renderMediaView = () => (\n    <div className={cx('media-view')}>\n      <div className={cx('media-grid-full')}>\n        {filesData.media.map((item, index) => (\n          <div\n            key={index}\n            className={cx('media-item-full')}\n            onMouseEnter={() => item.type === 'video' && handleMouseEnter(index)}\n            onMouseLeave={() => item.type === 'video' && handleMouseLeave()}\n          >\n            {item.type === 'image' ? (\n              failedMedia.has(index) ? (\n                <div className={cx('media-placeholder')}>Unavailable</div>\n              ) : (\n                <img\n                  src={`https://${buckets}.s3.amazonaws.com/${item.url}`}\n                  className={cx('media-img')}\n                  onError={() => handleMediaError(index)}\n                  onClick={() => handlePreview({ id: index, type: item.type, url: item.url })}\n                />\n              )\n            ) : item.type === 'video' ? (\n              failedMedia.has(index) ? (\n                <div className={cx('media-placeholder')}>Unavailable</div>\n              ) : (\n                <div\n                  className={cx('video-container')}\n                  onClick={() => handlePreview({ id: index, type: item.type, url: item.url })}\n                >\n                  <video\n                    src={`https://${buckets}.s3.amazonaws.com/${item.url}`}\n                    className={cx('media-video')}\n                    playsInline\n                    preload=\"metadata\"\n                    onError={() => handleMediaError(index)}\n                  />\n                  <div\n                    className={cx('video-overlay', { 'video-overlay--visible': hoveredVideo === index })}\n                  >\n                    <div className={cx('video-play-icon')}>\n                      <Play size={32} />\n                    </div>\n                  </div>\n                </div>\n              )\n            ) : (\n              <div className={cx('media-placeholder')}>Không hỗ trợ</div>\n            )}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n\n  // Render toàn bộ files\n  const renderFilesView = () => (\n    <div className={cx('files-view')}>\n      <div className={cx('files-list-full')}>\n        {filesData.files.map((file, index) => (\n          <div key={index} className={cx('file-item-full')}>\n            <div className={cx('file-icon-large', 'blue')}>\n              <a\n                href={`https://${buckets}.s3.amazonaws.com/${file.url}`}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                download={file.content}\n              >\n                <FileText size={24} color='white'/>\n              </a>\n            </div>\n            <div className={cx('file-info')}>\n              <a\n                href={`https://${buckets}.s3.amazonaws.com/${file.url}`}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className={cx('file-name')}\n                download={file.content}\n              >\n                {file.content}\n              </a>\n              <p className={cx('file-size')}>65.32 KB</p>\n            </div>\n            <div className={cx('file-date')}>{file.date}</div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n\n  // Render toàn bộ links\n  const renderLinksView = () => (\n    <div className={cx('links-view')}>\n      <div className={cx('links-list-full')}>\n        {filesData.links.map((link, index) => {\n          let domain = link.link;\n          try {\n            const fixed = link.link.startsWith('http') ? link.link : `http://${link.link}`;\n            domain = new URL(fixed).hostname;\n          } catch (e) {\n            // giữ nguyên nếu lỗi\n          }\n\n          return (\n            <div key={index} className={cx('link-item-full')}>\n              <div className={cx('link-icon-large')}>\n                <a href={link.link} target=\"_blank\" rel=\"noopener noreferrer\">\n                  <Link size={24} />\n                </a>\n              </div>\n              <div className={cx('link-info')}>\n                <a\n                  href={link.link}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className={cx('link-name')}\n                >\n                  {link.link}\n                </a>\n                <div className={cx('link-meta')}>\n                  <a\n                    href={link.link}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className={cx('link-url')}\n                  >\n                    {domain}\n                  </a>\n                  <span className={cx('link-date')}>{link.date}</span>\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n\n  // Lấy tiêu đề dựa trên view hiện tại\n  const getViewTitle = () => {\n    switch (currentView) {\n      case 'media':\n        return 'Ảnh/Video';\n      case 'files':\n        return 'File';\n      case 'links':\n        return 'Link';\n      default:\n        return 'Thông tin hội thoại';\n    }\n  };\n\n  // Nếu không có friend, hiển thị giao diện thay thế\n  if (!friend) {\n    return (\n      <div className={cx('detail')}>\n        <div className={cx('header')}>\n          <h2 className={cx('title')}>Lỗi</h2>\n        </div>\n        <div className={cx('error')}>\n          Không tìm thấy thông tin người dùng. Vui lòng chọn một người dùng để xem chi tiết.\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={cx('detail')}>\n      {/* Header */}\n      <div className={cx('header')}>\n        {currentView !== 'main' && (\n          <button onClick={() => setCurrentView('main')} className={cx('back-btn')}>\n            <ArrowLeft size={16} />\n          </button>\n        )}\n        <h2 className={cx('title')}>{getViewTitle()}</h2>\n      </div>\n\n      {/* Render view tương ứng */}\n      {currentView === 'main' && renderMainView()}\n      {currentView === 'media' && renderMediaView()}\n      {currentView === 'files' && renderFilesView()}\n      {currentView === 'links' && renderLinksView()}\n      {renderPreviewModal()}\n    </div>\n  );\n}\n\nexport default Detail;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}