{"ast":null,"code":"import React,{useState}from\"react\";import{useLocation}from\"react-router-dom\";import classNames from\"classnames/bind\";import styles from\"./ResetPassword.module.scss\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const cx=classNames.bind(styles);function ResetPassword(){const[password,setPassword]=useState(\"\");const[confirmPassword,setConfirmPassword]=useState(\"\");const[showPassword,setShowPassword]=useState(false);const[showConfirmPassword,setShowConfirmPassword]=useState(false);const[errorMessage,setErrorMessage]=useState(\"\");const location=useLocation();const{email,phone}=location.state||{};const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();setErrorMessage(\"\");try{const res=await axios.post(\"http://localhost:5000/api/auth/reset-password\",{phone,email,password,confirmPassword});if(res.status===200){alert(\"Mật khẩu của bạn đã được đặt lại thành công!\");navigate('/');}}catch(error){if(error.response){setErrorMessage(error.response.data.message||'Đăng nhập thất bại');}else{setErrorMessage('Lỗi kết nối server');}}};const toggleShowPassword=()=>setShowPassword(prev=>!prev);const toggleShowConfirmPassword=()=>setShowConfirmPassword(prev=>!prev);return/*#__PURE__*/_jsx(\"div\",{className:cx(\"container\"),children:/*#__PURE__*/_jsx(\"div\",{className:cx(\"wrapper\"),children:/*#__PURE__*/_jsxs(\"div\",{className:cx(\"box\"),children:[/*#__PURE__*/_jsx(\"h2\",{className:cx(\"title\"),children:\"\\u0110\\u1EB7t l\\u1EA1i m\\u1EADt kh\\u1EA9u\"}),/*#__PURE__*/_jsx(\"p\",{className:cx(\"subtitle\"),children:\"Nh\\u1EADp m\\u1EADt kh\\u1EA9u m\\u1EDBi v\\xE0 x\\xE1c nh\\u1EADn \\u0111\\u1EC3 ti\\u1EBFp t\\u1EE5c.\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:cx(\"form\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:cx(\"form-group\"),children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"M\\u1EADt kh\\u1EA9u m\\u1EDBi\"}),/*#__PURE__*/_jsxs(\"div\",{className:cx(\"input-wrapper\"),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fi fi-rr-lock\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",type:showPassword?\"text\":\"password\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Nh\\u1EADp m\\u1EADt kh\\u1EA9u m\\u1EDBi...\",className:cx(\"input\"),autoComplete:\"new-password\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:cx(\"toggle-btn\"),onClick:toggleShowPassword,tabIndex:-1,\"aria-label\":showPassword?\"Ẩn mật khẩu\":\"Hiện mật khẩu\",children:/*#__PURE__*/_jsx(\"i\",{className:showPassword?\"fi fi-rr-eye-crossed\":\"fi fi-rr-eye\",\"aria-hidden\":\"true\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:cx(\"form-group\"),children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmPassword\",children:\"X\\xE1c nh\\u1EADn m\\u1EADt kh\\u1EA9u\"}),/*#__PURE__*/_jsxs(\"div\",{className:cx(\"input-wrapper\"),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fi fi-rr-lock\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"input\",{id:\"confirmPassword\",type:showConfirmPassword?\"text\":\"password\",value:confirmPassword,onChange:e=>setConfirmPassword(e.target.value),placeholder:\"Nh\\u1EADp l\\u1EA1i m\\u1EADt kh\\u1EA9u...\",className:cx(\"input\"),autoComplete:\"new-password\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:cx(\"toggle-btn\"),onClick:toggleShowConfirmPassword,tabIndex:-1,\"aria-label\":showConfirmPassword?\"Ẩn mật khẩu\":\"Hiện mật khẩu\",children:/*#__PURE__*/_jsx(\"i\",{className:showConfirmPassword?\"fi fi-rr-eye-crossed\":\"fi fi-rr-eye\",\"aria-hidden\":\"true\"})})]})]}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{className:cx(\"error\"),children:errorMessage}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:cx(\"btn\"),children:\"X\\xE1c nh\\u1EADn\"})]}),/*#__PURE__*/_jsx(\"p\",{className:cx(\"note\"),children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"Quay l\\u1EA1i \\u0111\\u0103ng nh\\u1EADp\"})})]})})});}export default ResetPassword;","map":{"version":3,"names":["React","useState","useLocation","classNames","styles","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","cx","bind","ResetPassword","password","setPassword","confirmPassword","setConfirmPassword","showPassword","setShowPassword","showConfirmPassword","setShowConfirmPassword","errorMessage","setErrorMessage","location","email","phone","state","navigate","handleSubmit","e","preventDefault","res","post","status","alert","error","response","data","message","toggleShowPassword","prev","toggleShowConfirmPassword","className","children","onSubmit","htmlFor","id","type","value","onChange","target","placeholder","autoComplete","onClick","tabIndex","href"],"sources":["/home/ichigomazone/Vscode/ReactJs/new-ui/frontend/src/pages/ResetPassword/index.js"],"sourcesContent":["\n\nimport React, { useState } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport classNames from \"classnames/bind\";\nimport styles from \"./ResetPassword.module.scss\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst cx = classNames.bind(styles);\n\nfunction ResetPassword() {\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const location = useLocation();\n  const { email, phone } = location.state || {};\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setErrorMessage(\"\");\n\n    try {\n      const res = await axios.post(\"http://localhost:5000/api/auth/reset-password\", {\n        phone,\n        email,\n        password,\n        confirmPassword,\n      });\n\n      if (res.status === 200) {\n        alert(\"Mật khẩu của bạn đã được đặt lại thành công!\");\n        navigate('/');\n      }\n    }\n    catch(error) {\n      if (error.response) {\n        setErrorMessage(error.response.data.message || 'Đăng nhập thất bại');\n      } else {\n        setErrorMessage('Lỗi kết nối server');\n      }\n    }\n  };\n\n  const toggleShowPassword = () => setShowPassword((prev) => !prev);\n  const toggleShowConfirmPassword = () => setShowConfirmPassword((prev) => !prev);\n\n  return (\n    <div className={cx(\"container\")}>\n      <div className={cx(\"wrapper\")}>\n        <div className={cx(\"box\")}>\n          <h2 className={cx(\"title\")}>Đặt lại mật khẩu</h2>\n          <p className={cx(\"subtitle\")}>\n            Nhập mật khẩu mới và xác nhận để tiếp tục.\n          </p>\n\n          <form onSubmit={handleSubmit} className={cx(\"form\")}>\n            {/* Mật khẩu mới */}\n            <div className={cx(\"form-group\")}>\n              <label htmlFor=\"password\">Mật khẩu mới</label>\n              <div className={cx(\"input-wrapper\")}>\n                <i className=\"fi fi-rr-lock\" aria-hidden=\"true\" />\n                <input\n                  id=\"password\"\n                  type={showPassword ? \"text\" : \"password\"}\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  placeholder=\"Nhập mật khẩu mới...\"\n                  className={cx(\"input\")}\n                  autoComplete=\"new-password\"\n                />\n                <button\n                  type=\"button\"\n                  className={cx(\"toggle-btn\")}\n                  onClick={toggleShowPassword}\n                  tabIndex={-1}\n                  aria-label={showPassword ? \"Ẩn mật khẩu\" : \"Hiện mật khẩu\"}\n                >\n                  <i\n                    className={showPassword ? \"fi fi-rr-eye-crossed\" : \"fi fi-rr-eye\"}\n                    aria-hidden=\"true\"\n                  />\n                </button>\n              </div>\n            </div>\n\n            {/* Xác nhận mật khẩu */}\n            <div className={cx(\"form-group\")}>\n              <label htmlFor=\"confirmPassword\">Xác nhận mật khẩu</label>\n              <div className={cx(\"input-wrapper\")}>\n                <i className=\"fi fi-rr-lock\" aria-hidden=\"true\" />\n                <input\n                  id=\"confirmPassword\"\n                  type={showConfirmPassword ? \"text\" : \"password\"}\n                  value={confirmPassword}\n                  onChange={(e) => setConfirmPassword(e.target.value)}\n                  placeholder=\"Nhập lại mật khẩu...\"\n                  className={cx(\"input\")}\n                  autoComplete=\"new-password\"\n                />\n                <button\n                  type=\"button\"\n                  className={cx(\"toggle-btn\")}\n                  onClick={toggleShowConfirmPassword}\n                  tabIndex={-1}\n                  aria-label={showConfirmPassword ? \"Ẩn mật khẩu\" : \"Hiện mật khẩu\"}\n                >\n                  <i\n                    className={showConfirmPassword ? \"fi fi-rr-eye-crossed\" : \"fi fi-rr-eye\"}\n                    aria-hidden=\"true\"\n                  />\n                </button>\n              </div>\n            </div>\n\n            {errorMessage && <p className={cx(\"error\")}>{errorMessage}</p>}\n\n            <button type=\"submit\" className={cx(\"btn\")}>\n              Xác nhận\n            </button>\n          </form>\n\n          <p className={cx(\"note\")}>\n            <a href=\"/\">Quay lại đăng nhập</a>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ResetPassword;\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}